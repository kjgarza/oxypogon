---
layout: layouts/base.njk
title: "Today's Workout | CrossFit Workout Viewer"
---

{% if workout.success %}
  {# Hero Section #}
  <div class="bg-gradient-to-r from-primary to-secondary text-primary-content p-8 rounded-2xl mb-8 shadow-lg">
    <div class="text-center">
      <h2 class="text-4xl font-bold mb-4">{{ workout.combined_content.title }}</h2>
      <div class="flex flex-wrap justify-center items-center gap-4 text-lg">
        <div class="flex items-center gap-2">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
          </svg>
          <span>{{ workout.combined_content.date | formatDate }}</span>
        </div>
        <div class="divider divider-horizontal"></div>
        <div class="flex items-center gap-2">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
          </svg>
          <span class="text-sm opacity-90">Generated {{ workout.timestamp | formatTimestamp }}</span>
        </div>
      </div>
    </div>
  </div>

  {# Workout Section #}
  <div class="mb-12">
    <h3 class="text-2xl font-bold text-base-content flex items-center gap-3 mb-6">
      <div class="w-8 h-8 bg-primary text-primary-content rounded-lg flex items-center justify-center">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M15.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM5 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zM5 20.5c-1.9 0-3.5-1.6-3.5-3.5S3.1 13.5 5 13.5s3.5 1.6 3.5 3.5S6.9 20.5 5 20.5zM10.8 10.5l2.4-2.4.8.8c1.3 1.3 3.1 2.1 5.1 2.1V9c-1.5 0-2.7-.6-3.6-1.5L13.4 5.4c-.4-.4-.9-.6-1.4-.6s-1 .2-1.4.6L8.8 7.3c-.4.4-.6.9-.6 1.4 0 .5.2 1 .6 1.4l2.4 2.4zM19 12c-2.8 0-5 2.2-5 5s2.2 5 5 5 5-2.2 5-5-2.2-5-5-5zM19 20.5c-1.9 0-3.5-1.6-3.5-3.5s1.6-3.5 3.5-3.5 3.5 1.6 3.5 3.5S20.9 20.5 19 20.5z"/>
        </svg>
      </div>
      Today's Workout
    </h3>
    <div class="bg-base-100 border border-base-300 rounded-2xl p-8 shadow-sm">
      <div class="prose prose-lg max-w-none text-base-content">
        {{ workout.combined_content.workout_text | safe }}
      </div>
    </div>
  </div>

  {# AI Explanation Section #}
  {% if workout.ai_explanation and workout.ai_explanation.explanation %}
  <div class="mb-12">
    <h3 class="text-2xl font-bold text-base-content flex items-center gap-3 mb-6">
      <div class="w-8 h-8 bg-secondary text-secondary-content rounded-lg flex items-center justify-center">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z"/>
        </svg>
      </div>
      Exercise Guide & Tips
      <span class="badge badge-secondary">AI</span>
    </h3>
    <div class="bg-gradient-to-br from-base-100 to-base-200 border border-base-300 rounded-2xl p-8 shadow-sm">
      <div class="prose prose-base max-w-none text-base-content">
        {{ workout.ai_explanation.explanation | safe }}
      </div>
    </div>
  </div>
  {% endif %}

  {# Metadata Section #}
  <div class="mb-12">
    <h3 class="text-lg font-semibold text-base-content/70 mb-4">Workout Details</h3>
    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
      <div class="bg-base-100 border border-base-300 rounded-xl p-4">
        <div class="text-xs text-base-content/60 mb-1">Source</div>
        <a href="{{ workout.original_data.source_url }}" target="_blank" rel="noopener noreferrer" class="text-sm text-primary hover:underline truncate block">
          CrossFit MINS
        </a>
      </div>
      <div class="bg-base-100 border border-base-300 rounded-xl p-4">
        <div class="text-xs text-base-content/60 mb-1">Retrieved</div>
        <div class="text-sm">{{ workout.original_data.timestamp | formatTimestamp }}</div>
      </div>
      <div class="bg-base-100 border border-base-300 rounded-xl p-4">
        <div class="text-xs text-base-content/60 mb-1">AI Model</div>
        <div class="text-sm">{{ workout.ai_explanation.model }}</div>
      </div>
      <div class="bg-base-100 border border-base-300 rounded-xl p-4">
        <div class="text-xs text-base-content/60 mb-1">Status</div>
        <span class="badge badge-success badge-sm">Success</span>
      </div>
    </div>
  </div>

{% else %}
  {# Error State #}
  <div class="alert alert-error shadow-lg">
    <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <div>
      <h3 class="font-bold">Error Loading Workout Data</h3>
      <div class="text-sm">{{ workout.error | default("Could not load workout data. Please check back later.") }}</div>
    </div>
  </div>
{% endif %}
